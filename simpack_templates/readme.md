SIMPACK TEMPLATES
=================

In the context of CADEE, a simpack (SIMulation PACKage) is a collection of files (_pack_) needed to perform a warmup, equilibration and
a free energy perturbation. The files included in a simpack are systematically named. This system is here explained in this readme.

# Basic Structure
A simpack is a tarball containing files only (no directories).  
  
The file names have their purpose encoded. See further down in the document for more information.
1. Temperization Input Files __(0*.inp)__.  
2. Equlibration Files __(*eq.inp)__.  
3. FEP Input Files __(*fep.inp)__.  
4. EVB Analysis Files __(*.qana)__.  
5. A readme file __(readme)__ (optional).    

Additionally all prepared simpacks ('cadee prep') contain:
6. A Topology for Q __(mutant.top)__ and  - not strictly required - a pdbfile __(mutant.pdb)__.
7. A FEP-file for Q __(mutant.fep)__
  
Once, a simpack has been run ('cadee dyn'), the simpack contains output files:
8. Log Files generated by Qdyn6 __(0*.log)__, __(*eq.log)__ and __(*fep.log)__.  
*Note*: Logs are usually compressed and end then with __(*.log.gz)__.
9. Restart Files __(0*.re)__, __(*eq.re)__ and __(*fep.re)__.
10. Energy Files generated by Qdyn6 __(*fep.en)__ and also __(*eq.en)__ .  
*Note*: Energyfiles may be compressed and end then with __(*.en.gz)__.
11. dcd files, containing the compressed trajectory, __(*.dcd)__.

Often, additional files are included. To avoid interference with CADEE, it is absolutely __CRUCIAL to avoid filenames ending on *.inp__.
Because these could easily be mistaken as Q-input files.

##1 Temperization Input Files
The user is advised to add or remove file without adjusting *ceate_template_based_simpack.py*.  
 
CADEE expects 8 files, named this way:    
__01_dyn_seed.inp__:
The first file to be run. Contains the 'seed' keyword. Very short timestep (0.01fs).  
__02_dyn_no_shake.inp__:
Disabled Shake short timestep (0.1fs).  
__03_dyn_warm_1.inp__:
Warm to 1K.  Normal timestep (1fs).  
__04_dyn_warm_150.inp__:
Warming the system to 150K.  
__05_dyn_warm_300.inp__:
The firth file, warming the system to 300K.  
__06_dyn_rls_water.inp__:
Removing the sequence restraint on the water.  
__07_dyn_rls_protein1.inp__:
Lowering the sequence restraint on protein.  
__08_dyn_rls_protein2.inp__:
Removing the sequence restraint on the protein.  


##2 Equlibration Input Files
To avoid confusion all files that are not part of the temperization, start with a 4-digit number. The default simpack for example,
the first equlibration lies in the file __1000_eq.inp__. The second equlibration is named __1010_eq.inp__. The third __1020_eq.inp__ etc.

##3 FEP Input Files
To run EVB simulations, FEP files are needed. In the default simpack, every 20th equlibration, is followed by a medium sized FEP calculation, consisting of 26 windows.
__1190_fep.inp__, __1200_fep.inp__, ..., __1450_fep.inp__

##4 Q-Analysis Files
To automatically map the EVB calculations, files ending on *.qana can be used. A simpack without *.qana files IS NOT MAPPED BY CADEE.
A *.qana file contains the names of the energy files (without extension) in the __ordered by lambda__.
An example file content of a qana could be:
1450_fep 1440_fep 1430_fep 1420_fep 1410_fep 1400_fep 1390_fep 1380_fep 1370_fep 1360_fep 1350_fep 1340_fep 1330_fep 1190_eq 1200_fep 1210_fep 1220_fep 1230_fep 1240_fep 1250_fep 1260_fep 1270_fep 1280_fep 1290_fep 1300_fep 1310_fep 1320_fep

##5 readme
The readme is optional and should contain information for the user about the simpack.

##6 mutant.top / mutant.pdb
The __topology__ is required to run any MD simulation. It will be added to the simpack by cadee prep.
By default, the corresponding __pdb-file (mutant.pdb)__ is included, too.

##7 mutant.fep
The __fepfile__ is required to compute EVB. It will be added to the simpack by cadee prep.


##8 Log Files
Are output generated by Qdyn6 and once a step has been computed successfully, logfiles are usually compressed, ending with __(.log.gz)__.

##9 Restart Files
Restart files contain coordinates and velocities and are used to continue the simulation from a given point.

##10 Energy Files
Are generated by Qdyn6 __(*fep.en)__. *Note*: Energyfiles may be compressed and end then with __(.en.gz)__.

##11 DCD Files
The dcd files contain the 'movie' of a simulation and can for example be viewed with VMD. To do so, the mutant.pdb is need, too.



